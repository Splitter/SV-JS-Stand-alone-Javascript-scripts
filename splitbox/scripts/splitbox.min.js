(function(){var c=function(){var o=[],s=null,u=function(){if(k!=0){if(o.length>0)for(var a=0;a<o.length;a++){var b=o[a],g=+new Date,i=g-b.startTime,f=g>b.endTime?1:i/b.duration,e;for(e in b.css){var h=b.css[e],f=b.easing&&c.easing[b.easing]?c.easing[b.easing](f,i,0,1,b.duration):f;g>b.endTime?c.css(b.elem,e,h.to+(e=="opacity"?"":"px")):c.css(b.elem,e,(h.from+(h.to-h.from)*f).toFixed(3)+(e=="opacity"?"":"px"))}if(g>b.endTime&&(o.splice(a,1),b.onend))b.onend()}}else o=[]},e,j=0,r,p,m,n=[],f,l,h,t,k, q;return{animate:function(a){for(var b in a.css){if(typeof a.css[b]==="string"){var g=a.css[b];a.css[b]={};a.css[b].to=g;a.css[b].from=parseFloat(c.css(a.elem,b))}for(var i in a.css[b]){var e,g=""+a.css[b][i];a.css[b][i]=(e=g.match(/\+\=|\-\=/))?e=="+="?parseFloat(c.css(a.elem,b))+parseFloat(a.css[b][i].replace(e,"")):parseFloat(c.css(a.elem,b))-parseFloat(a.css[b][i].replace(e,"")):parseFloat(g)}}a.startTime=+new Date;a.endTime=a.startTime+a.duration;o.push(a);s||(s=setInterval(u,10))},camelCase:function(a, b){return b?a.replace(/\-(.)/g,function(a,b){return b.toUpperCase()}):a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()})},css:function(a,b,g){if(typeof b==="string"&&g)c.setCSS(a,b,g);else if(typeof b==="object")for(type in b)c.setCSS(a,type,b[type]);else return a.currentStyle?a.currentStyle[c.camelCase(b,!0)]:getComputedStyle(a,null).getPropertyValue(c.camelCase(b,!1))},docSize:function(){return{w:document.body.scrollWidth||document.documentElement.scrollWidth||document.body.clientWidth|| document.documentElement.clientWidth,h:document.body.scrollHeight||document.documentElement.scrollHeight||document.body.clientHeight||document.documentElement.clientHeight}},easing:{easeInOutExpo:function(a,b,c,e,f){if(b==0)return c;if(b==f)return c+e;if((b/=f/2)<1)return e/2*Math.pow(2,10*(b-1))+c;return e/2*(-Math.pow(2,-10*--b)+2)+c}},empty:function(){k!=0&&(e.removeChild(e.childNodes[1]),f.removeChild(f.firstChild),f.removeChild(document.getElementById("sb_overDiv")))},init:function(a){h={image_directory:"images/", overlayOpacity:"0.8",overlayTransSpeed:300,transSpeed:1E3,titleTransSpeed:300,iheight:200,iwidth:200};if(a)for(var b in a)h[b]=a[b];a=document.body.getElementsByTagName("a");b=0;for(var g=a.length;b<g;b++){var e=a[b];if(e.rel=="splitbox")e.onclick=c.open;else if(e.rel.search(/splitbox/i)>-1)e.onclick=c.open}},loadContainer:function(){if(k!=0){e=document.createElement("div");e.id="sb_container";f=document.createElement("div");f.id="sb_innerdiv";var a=document.createElement("div");a.className="sb_padding"; document.body.appendChild(a);document.body.appendChild(e);p=parseInt(c.css(a,"paddingLeft"))+parseInt(c.css(a,"paddingRight"))+parseInt(c.css(e,"paddingLeft"))+parseInt(c.css(e,"paddingRight"));q=parseInt(c.css(a,"paddingBottom"))+parseInt(c.css(a,"paddingTop"))+parseInt(c.css(e,"paddingBottom"))+parseInt(c.css(e,"paddingTop"));document.body.removeChild(a);document.body.removeChild(e);p=parseInt(p/2);q=parseInt(q/2);c.css(f,{width:h.iwidth+"px",height:h.iheight+"px",backgroundImage:"url("+h.image_directory+ "loading.gif)",backgroundPosition:" center center ",backgroundRepeat:"no-repeat"});var b=c.viewSize(),g=b.h/2-(h.iheight/2+q)+c.top();c.css(e,{left:b.w/2-(h.iwidth/2+p)+"px",top:g+"px"});a.appendChild(f);e.appendChild(a);document.body.appendChild(e);m=new Image;m.onload=c.loadImage;m.src=t}},loadControls:function(){if(k!=0){var a="",b=document.createElement("div"),g=document.createElement("div"),i=document.createElement("div");tspan=document.createElement("span");clear=document.createElement("div"); if(n[j].title)a=n[j].title;b.className="sb_padding";g.id="sb_titlediv";i.id="sb_close";i.onclick=c.remove;tspan.appendChild(document.createTextNode(a));g.appendChild(tspan);g.appendChild(i);clear.className="clear";g.appendChild(clear);document.body.appendChild(g);a=g.offsetHeight+"px";document.body.removeChild(g);c.css(g,{height:"0px",width:c.css(f,"width"),overflow:"hidden"});b.appendChild(g);e.appendChild(b);c.animate({elem:g,duration:h.titleTransSpeed,css:{height:a},onend:function(){if(n.length> 1){var a=document.createElement("a"),b=document.createElement("a"),e=document.createElement("div");b.id="sb_prev";a.id="sb_next";e.id="sb_overDiv";b.href="#";a.href="#";c.css(e,{width:c.css(f,"width"),height:c.css(f,"height"),top:"-"+c.css(f,"height"),position:"relative",zIndex:"3000"});c.css(b,{width:"40%",height:c.css(f,"height"),position:"relative",zIndex:"3000"});c.css(a,{width:"40%",height:c.css(f,"height"),position:"relative",zIndex:"3000"});a.onclick=c.next;b.onclick=c.prev;e.appendChild(b); e.appendChild(a);f.appendChild(e)}}})}},loadImage:function(){if(k!=0){var a=c.viewSize(),b=a.h/2-(this.height/2+q)+c.top();c.animate({elem:e,duration:h.transSpeed,easing:"easeInOutExpo",css:{top:b+"px",left:a.w/2-(this.width/2+p)+"px"}});c.animate({elem:f,duration:h.transSpeed,easing:"easeInOutExpo",css:{width:parseInt(this.width)+"px",height:parseInt(this.height)+"px"},onend:function(){c.css(m,{opacity:"0.0"});c.css(f,{backgroundImage:""});f.appendChild(m);c.animate({elem:m,duration:h.transSpeed, css:{opacity:"1"},onend:c.loadControls})}})}},loadOverlay:function(){if(k!=0){d=document;l=d.createElement("div");d.body.appendChild(l);l.id="sb_overlay";var a=c.docSize();c.css(l,{width:a.w+"px",height:a.h+"px",opacity:0});l.onclick=c.remove;c.animate({elem:l,duration:h.overlayTransSpeed,css:{opacity:h.overlayOpacity},onend:c.loadContainer})}},next:function(){var a=document.getElementById("sb_titlediv");c.css(a,{height:a.offsetHeight+"px",overflow:"hidden"});c.animate({elem:a,duration:h.titleTransSpeed, css:{height:"0px"},onend:function(){k!=0&&(c.empty(),j+1>n.length-1?j=0:j+=1,c.startSwitch())}});return!1},open:function(){if(this){r=this.rel=="splitbox"?null:this.rel.match(/\[(.*)\]/)[1];t=this.href;if(r)for(var a=document.body.getElementsByTagName("a"),b=0,e=a.length;b<e;b++){var f=a[b];f.rel.search(/splitbox/i)>-1&&f.rel.match(/\[(.*)\]/)&&f.rel.match(/\[(.*)\]/)[1]==r&&(n.push(f),f==this&&(j=b))}else n.push(this),j=0;k=1;c.loadOverlay();return!1}},prev:function(){var a=document.getElementById("sb_titlediv"); c.css(a,{height:a.offsetHeight+"px",overflow:"hidden"});c.animate({elem:a,duration:h.titleTransSpeed,css:{height:"0px"},onend:function(){k!=0&&(c.empty(),j-1<0?j=n.length-1:j-=1,c.startSwitch())}});return!1},remove:function(){k=0;e&&document.getElementById(e.id)&&(document.body.removeChild(e),e=null);l&&document.getElementById(l.id)&&(document.body.removeChild(l),l=null);n=[]},setCSS:function(a,b,e){switch(b){case "opacity":e=parseFloat(e);a.style.filter=e===1?"":"alpha(opacity="+e*100+")";a.style.opacity= e;break;default:a.style[c.camelCase(b,!0)]=e}},startSwitch:function(){f.style.backgroundImage="url("+h.image_directory+"loading.gif)";f.style.backgroundPosition=" center center ";f.style.backgroundRepeat="no-repeat";m=new Image;m.onload=c.loadImage;m.src=n[j].href},top:function(){return document.body.scrollTop||document.documentElement.scrollTop},viewSize:function(){return{w:self.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h:self.innerHeight||document.documentElement.clientHeight|| document.body.clientHeight}}}}();window.splitbox=c})();